---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';

// IMPORTANTE: Reemplaza "TU_FORMSPREE_ID" con tu ID real de Formspree
// 1. Ve a https://formspree.io y crea una cuenta gratuita
// 2. Crea un nuevo formulario y añade los emails: asgtineo@gmail.com y lucasrural@gmail.es
// 3. Copia el ID del formulario (ejemplo: xpznqwer) y reemplázalo abajo
const FORMSPREE_ID = "mdanzrro";
---

<Layout title="Contacto">
    <Navbar />

    <main class="pt-24 px-4 sm:px-8 max-w-4xl mx-auto pb-16">
        {/* Cabecera */}
        <header class="mb-12 text-center py-8">
            <h1 class="text-5xl md:text-6xl font-light uppercase tracking-widest mb-4" style="font-family: 'Oswald', sans-serif; color: #FF5722;">
                Contacto
            </h1>
            <p class="text-lg text-stone-600 font-light max-w-xl mx-auto leading-relaxed">
                ¿Interesado en alguna pieza o tienes alguna pregunta? Escríbeme y te responderé lo antes posible.
            </p>
        </header>

        <div class="max-w-xl mx-auto">
            {/* Formulario */}
            <section>
                <form 
                    action={`https://formspree.io/f/${FORMSPREE_ID}`}
                    method="POST"
                    class="space-y-8"
                    id="contact-form"
                >
                    <div>
                        <label for="name" class="block text-sm uppercase tracking-wide text-stone-600 mb-2">
                            Nombre
                        </label>
                        <input 
                            type="text" 
                            id="name" 
                            name="name" 
                            required
                            class="w-full px-4 py-3 border border-stone-300 bg-white text-stone-800 focus:border-orange-500 focus:outline-none transition-colors"
                            placeholder="Tu nombre"
                        />
                    </div>

                    <div>
                        <label for="email" class="block text-sm uppercase tracking-wide text-stone-600 mb-2">
                            Email
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            required
                            class="w-full px-4 py-3 border border-stone-300 bg-white text-stone-800 focus:border-orange-500 focus:outline-none transition-colors"
                            placeholder="tu@email.com"
                        />
                    </div>

                    <div>
                        <label for="subject" class="block text-sm uppercase tracking-wide text-stone-600 mb-2">
                            Asunto
                        </label>
                        <select 
                            id="subject" 
                            name="_subject"
                            class="w-full px-4 py-3 border border-stone-300 bg-white text-stone-800 focus:border-orange-500 focus:outline-none transition-colors"
                        >
                            <option value="consulta-pieza">Consulta sobre una pieza</option>
                            <option value="encargo">Encargo personalizado</option>
                            <option value="exposicion">Exposiciones / Colaboraciones</option>
                            <option value="taller">Visita al taller</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>

                    <div>
                        <label for="message" class="block text-sm uppercase tracking-wide text-stone-600 mb-2">
                            Mensaje
                        </label>
                        <textarea 
                            id="message" 
                            name="message" 
                            rows="5"
                            required
                            class="w-full px-4 py-3 border border-stone-300 bg-white text-stone-800 focus:border-orange-500 focus:outline-none transition-colors resize-none"
                            placeholder="Escribe tu mensaje aquí..."
                        ></textarea>
                    </div>

                    <button 
                        type="submit"
                        class="submit-btn w-full px-8 py-4 text-sm uppercase tracking-widest font-light transition-all duration-300 border-2"
                        style="border-color: #FF5722; color: #FF5722;"
                    >
                        Enviar mensaje
                    </button>
                </form>

                {/* Mensaje de éxito (oculto por defecto) */}
                <div id="success-message" class="hidden mt-6 p-6 bg-green-50 border border-green-200 text-green-800 text-center">
                    <p class="font-medium">¡Mensaje enviado!</p>
                    <p class="text-sm mt-1">Te responderé lo antes posible.</p>
                </div>
            </section>
        </div>
    </main>
</Layout>

<style>
    .submit-btn {
        position: relative;
        overflow: hidden;
        z-index: 1;
    }
    
    .submit-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background-color: #FF5722;
        transition: left 0.3s ease;
        z-index: -1;
    }
    
    .submit-btn:hover {
        color: white !important;
    }
    
    .submit-btn:hover::before {
        left: 0;
    }

    input:focus, textarea:focus, select:focus {
        border-color: #FF5722;
    }
</style>

<script>
    // Mostrar mensaje de éxito después de enviar (si viene de Formspree)
    if (window.location.search.includes('success')) {
        document.getElementById('contact-form')?.classList.add('hidden');
        document.getElementById('success-message')?.classList.remove('hidden');
    }
</script>
